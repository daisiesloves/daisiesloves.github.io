{
    "version": "https://jsonfeed.org/version/1",
    "title": "Daisies's blogs",
    "description": null,
    "home_page_url": "http://yoursite.com",
    "items": [
        {
            "id": "http://yoursite.com/2022/07/20/new%2074/",
            "url": "http://yoursite.com/2022/07/20/new%2074/",
            "title": "live2d",
            "date_published": "2022-07-20T09:13:57.654Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"live2d\"><a class=\"markdownIt-Anchor\" href=\"#live2d\">#</a> live2d</h1>\n<p>live2d:<br>\nenable: true<br>\nscriptFrom: local<br>\npluginRootPath: live2dw/<br>\npluginJsPath: lib/<br>\npluginModelPath: assets/<br>\ntagMode: false<br>\nlog: false<br>\nmodel:<br>\nuse: live2d-widget-model-hijiki<br>\ndisplay:<br>\nposition: right<br>\nwidth: 150<br>\nheight: 300<br>\nmobile:<br>\nshow: true<br>\nreact:<br>\nopacity: 0.7</p>\n",
            "tags": [
                "live2d"
            ]
        },
        {
            "id": "http://yoursite.com/2022/07/13/Test/",
            "url": "http://yoursite.com/2022/07/13/Test/",
            "title": "Test",
            "date_published": "2022-07-13T06:12:59.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><img data-src=\"D:%5COthers%5Chead05_%E5%89%AF%E6%9C%AC.jpg\" alt=\"head05_副本\"></p>\n",
            "tags": []
        },
        {
            "id": "http://yoursite.com/2019/01/05/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86Tomcat%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-redis%E5%AE%9E%E7%8E%B0session%E5%85%B1%E4%BA%AB/",
            "url": "http://yoursite.com/2019/01/05/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86Tomcat%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-redis%E5%AE%9E%E7%8E%B0session%E5%85%B1%E4%BA%AB/",
            "title": "Nginx反向代理Tomcat负载均衡+redis实现session共享",
            "date_published": "2019-01-05T04:19:50.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>测试环境</p>\n<pre><code>tomcatsrvs:node01srv: 192.168.6.80, node02srv: 192.168.6.82\nmastersrv:nginxsrv: 192.168.6.88\nredisrv: 192.168.6.86\n\ncat /etc/hosts\n192.168.6.80 node01.lboy.com\n192.168.6.82 node02.lboy.com\n192.168.6.86 node06.lboy.com\n192.168.6.88 master.lboy.com, www.lboy.com\n</code></pre>\n<p>1. 安装配置前端 nginxsrv</p>\n<pre><code>(1)修改nginx主配置文件\nyum install nginx -y\nvi /etc/nginx/nginx.conf #删除主配置文件默认的虚拟主机\nlisten 80;\n\n#测试代理\n\tvi /etc/nginx/conf.d/www.conf\n\tserver &#123;\n\t\tlisten 80 default_server;\n\t\tserver_name www.lboy.com;\n\t\tlocation / &#123;\n\t\t\tproxy_pass http://192.168.6.80:8080; #使用IP地址,访问默认的tomcat虚拟主机;当有多个虚拟主机时,应使用域名解析\n\t\t\t#proxy_pass http://node01.lboy.com:8080; #&quot;node01.lboy.com&quot;确保主机名正常解析\n\t\t&#125;\n\t&#125;\n\n\tsystemctl start nginx\n\n\thttp://www.lboy.com/ #浏览器测试正常访问tomcat默认虚拟主机\n\tTomcatA.magedu.com\n\tSession ID \tC83F0DB65F70CFDBDE0EEC8EB0B376CE\n\tCreated on \t1531556340022\n\n(2)添加nginx代理配置\nvi /etc/nginx/conf.d/www.conf\nupstream tcsrvs &#123;\n\t#ip_hash; #'ip_hash'会话绑定实现负载均衡,此方法粗糙建议使用cookie会话绑定\n\tserver node01.lboy.com:8080;\n\tserver node02.lboy.com:8080;\n&#125;\n\nserver &#123;\n\tlisten 80 default_server;\n\tserver_name www.lboy.com;\n\tlocation / &#123;\n\t\tproxy_pass http://tcsrvs;\n\t&#125;\n&#125;\n\n注意:nginx反向代理后端tomcat服务器时,域名已经解析成IP地址;访问tomcat时,是通过IP地址进行访问,所以会访问到tomcat的默认虚拟主机,需要修改默认虚拟主机配置\n</code></pre>\n<p>2. 后端 tomcatsrvs 节点，node01srv&amp;node02srv 安装配置</p>\n<pre><code>(1)node01srv\nyum install java-1.8.0-openjdk-devel\nyum install tomcat tomcat-lib tomcat-admin-webapps tomcat-webapps\n\nmkdir -pv /data/webapps/ROOT/&#123;classes,lib,META-INF,WEB-INF&#125;\nvi /data/webapps/ROOT/index.jsp\n&lt;%@ page language=&quot;java&quot; %&gt;\t\t\t\n&lt;html&gt;\n\t&lt;head&gt;&lt;title&gt;TomcatA&lt;/title&gt;&lt;/head&gt;\n\t&lt;body&gt;\n\t\t&lt;h1&gt;&lt;font color=&quot;red&quot;&gt;TomcatA.magedu.com&lt;/font&gt;&lt;/h1&gt;\n\t\t&lt;table align=&quot;centre&quot; border=&quot;1&quot;&gt;\t\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td&gt;Session ID&lt;/td&gt;\n\t\t\t&lt;% session.setAttribute(&quot;magedu.com&quot;,&quot;magedu.com&quot;); %&gt;\n\t\t\t\t&lt;td&gt;&lt;%= session.getId() %&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td&gt;Created on&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;%= session.getCreationTime() %&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;\n\ncp /etc/tomcat/server.xml&#123;,.bak&#125;\nvi /etc/tomcat/server.xml\n&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;node01.lboy.com&quot;&gt; #修改默认虚拟主机\n\n&lt;Host name=&quot;node01.lboy.com&quot; appBase=&quot;/data/webapps&quot; unpackWAR=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;\n\t&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;\n\t\tprefix=&quot;node01_access_log.&quot; suffix=&quot;.log&quot;\n\t\tpattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;\n&lt;/Host&gt;\n\n(2)node02srv\nyum install java-1.8.0-openjdk-devel\nyum install tomcat tomcat-lib tomcat-admin-webapps tomcat-webapps\nscp -rp 192.168.6.80:/data/ /\n\n~#vi /data/webapps/ROOT/index.jsp\n&lt;%@ page language=&quot;java&quot; %&gt;\n&lt;html&gt;\n\t&lt;head&gt;&lt;title&gt;TomcatB&lt;/title&gt;&lt;/head&gt;\n\t&lt;body&gt;\n\t\t&lt;h1&gt;&lt;font color=&quot;blue&quot;&gt;TomcatB.magedu.com&lt;/font&gt;&lt;/h1&gt;\n\t\t&lt;table align=&quot;centre&quot; border=&quot;1&quot;&gt;\n\t\t\t\t&lt;tr&gt;\n\t\t\t\t\t&lt;td&gt;Session ID&lt;/td&gt;\n\t\t\t\t&lt;% session.setAttribute(&quot;magedu.com&quot;,&quot;magedu.com&quot;); %&gt;\n\t\t\t\t\t&lt;td&gt;&lt;%= session.getId() %&gt;&lt;/td&gt;\n\t\t\t\t&lt;/tr&gt;\n\t\t\t\t&lt;tr&gt;\n\t\t\t\t\t&lt;td&gt;Created on&lt;/td&gt;\n\t\t\t\t\t&lt;td&gt;&lt;%= session.getCreationTime() %&gt;&lt;/td&gt;\n\t\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/body&gt;\n&lt;/html&gt;\n\nscp 192.168.6.80:/etc/tomcat/&#123;server.xml,tomcat-users.xml&#125; /etc/tomcat/\nvi /etc/tomcat/server.xml\n&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;node02.lboy.com&quot;&gt; #修改默认虚拟主机\n\n&lt;Host name=&quot;node02.lboy.com&quot; appBase=&quot;/data/webapps&quot; unpackWAR=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;\n\t&lt;Context path=&quot;/appt&quot; docBase=&quot;/data/otherapps/myapp&quot; reloadable=&quot;&quot;/&gt;\n\t&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;\n\t\t   prefix=&quot;node01_access_log.&quot; suffix=&quot;.log&quot;\n\t\t   pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;\n&lt;/Host&gt;\n\nsystemctl start tomcat\n</code></pre>\n<p>3. 安装配置 redisrv 实现 session 共享</p>\n<pre><code>(1)安装配置redisrv\nyum -y install redis\t\ncp /etc/redis.conf&#123;,.bak&#125;\nvi /etc/redis.conf\n#bind 127.0.0.1 #redis默认只允许本地访问,注释bind 127.0.0.1允许所有的IP访问redis\nbind 192.168.6.80 192.168.6.82 #指定可以访问的IP\n#protected-mode yes #在redis3.2之后,redis增加了protected-mode,在这个模式下,即使注释掉了bind 127.0.0.1,再访问redisd时候还是报错\nprotected-mode no\ndaemonize yes\n#daemonize no\n\n(2)拷贝以下三个jar文件至各tomcat节点类库文件目录/usr/share/tomcat/lib -&gt; /usr/share/java/tomcat\n~# tree tomcat8-redis-session-manager\ntomcat8-redis-session-manager/\n├── commons-pool2-2.2.jar\n├── jedis-2.5.2.jar\n└── tomcat-redis-session-manager-2.0.0.jar\n\n(3)编辑各tomcat节点context.xml文件,添加以下内容配置redis服务\nvi /etc/tomcat/context.xml\n&lt;Valve className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionHandlerValve&quot; /&gt;       \n&lt;Manager className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionManager&quot;\nhost=&quot;192.168.6.86&quot; #redisrv,IP地址\nport=&quot;6379&quot;\ndatabase=&quot;0&quot;\nmaxInactiveInterval=&quot;60&quot;/&gt;\n\n启动redis服务,重新启动所有tomcat,启动nginx,刷新nginx页面,两台tomcat页面可以看到sessionid值不变,关闭某台tomcat,nginx中sessionid不变,说明session是共享的.\n\n参考博文\n\thttps://www.cnblogs.com/mrlinfeng/p/6146866.html\n</code></pre>\n",
            "tags": [
                "tomcat"
            ]
        },
        {
            "id": "http://yoursite.com/2018/12/25/Keepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8Nginx%E6%9C%8D%E5%8A%A1/",
            "url": "http://yoursite.com/2018/12/25/Keepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8Nginx%E6%9C%8D%E5%8A%A1/",
            "title": "Keepalived实现高可用Nginx服务",
            "date_published": "2018-12-25T04:15:15.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>测试环境:</p>\n<pre><code>websrvs:realsrv1: 192.168.6.80, realsrv2: 192.168.6.82\nkeepsrvs:nodesrv1: 192.168.6.86, nodesrv2: 192.168.6.88\ncleint: 192.168.6.68\nvip: 192.168.6.99\n</code></pre>\n<p>实验目的:</p>\n<pre><code>当主节点nodesrv1上反向代理服务nginx异常不可用,主节点自身调度优先级别降低并释放vip转移给节点nodesrv2\n</code></pre>\n<p>1. 在 2 台节点服务器分别安装 nginx</p>\n<pre><code>nodesrv[1,2]\n\t~# yum install psmisc -y #'killall'命令程序包\n\tyum install nginx -y\n\tsystemctl start nginx\n\tsystemctl enable nginx\n\n(1)编辑nginx配置文件,实现代理\n\tvi /etc/nginx/conf.d/www.conf\n\tupstream websrvs &#123;\n\t\tserver 192.168.6.80:80;\n\t\tserver 192.168.6.82:80;\n\t&#125;\n\n\tserver &#123;\n\t\tlisten 80 default_server;\n\t\tserver_name nodesrv1.lboy.com;\n\t\troot /usr/share/nginx/html;\n\t\tlocation /&#123;\n\t\t\tproxy_pass http://websrvs;\n\t\t&#125;\n\t&#125;\n\n(2)编辑nginx主配置文件,删除默认server\n\tvi /etc/nginx/nginx.conf\n\t\tserver &#123;\n\t\t\tlisten       80;\n\t\t\tserver_name  localhost;\n\t\t\t...\n\t&#125;\n\n(3)在nodesrv2上同样配置nginx\n\tscp /etc/nginx/conf.d/www.conf root@192.168.6.88:/etc/nginx/conf.d/www.conf\n\tvi /etc/nginx/conf.d/www.conf\n\tserver_name nodesrv2.lboy.com;\n\t...\n</code></pre>\n<p>2. 修改 keepalived 配置文件示例如下<br>\n～# systemctl stop keepalived</p>\n<pre><code>#nodesrv1配置文件\n~# man 5 keepalived.conf\nvi /etc/keepalived/keepalived.cfg\n! Configuration File for keepalived\n\nglobal_defs &#123;\n\tnotification_email &#123;\n\t\troot@localhost\n&#125;\n\tnotification_email_from keepalived@localhost\n\tsmtp_server 127.0.0.1\n\tsmtp_connect_timeout 30\n\trouter_id nodesrv1\n\tvrrp_mcast_group4 224.0.100.89\n\tvrrp_skip_check_adv_addr\n\tvrrp_strict\n\tvrrp_garp_interval 0\n\tvrrp_gna_interval 0\n\tvrrp_iptables #不添加iptables规则\n&#125;\n\nvrrp_script chk_nginx &#123;\n\tscript &quot;killall -0 nginx &amp;&amp; exit 0 || exit 1&quot;\n\tinterval 1 #检测时间间隔\n\tweight -5  #权重降级\n\tfall 2\n\trise 1\n&#125;\n\nvrrp_instance VI_1 &#123;\n\tstate MASTER\n\tinterface ens33\n\tvirtual_router_id 16\n\tpriority 100\n\tadvert_int 1\n\tauthentication &#123;\n\t\tauth_type PASS\n\t\tauth_pass 516f97b2\n\t&#125;\n\tvirtual_ipaddress &#123;\n\t192.168.6.99/24 dev ens33\n\t&#125;\n\ttrack_interface &#123;\n\t\tens33\n\t&#125;\n\n\ttrack_script &#123;\n\t\tchk_nginx #调用脚本名称,与上定义的脚本名称相同\n\t&#125;\n\tnotify_master &quot;/etc/keepalived/notify.sh master&quot;\n\tnotify_backup &quot;/etc/keepalived/notify.sh backup&quot; #nginx异常终止时,主节点降为从节点,并传递参数执行脚本,尝试启动nginx\n\tnotify_fault &quot;/etc/keepalived/notify.sh fault&quot;\n&#125;\n\n#vrrp_instance VI_2 &#123;\n#\tstate MASTER\n#\tinterface ens33\n#\tvirtual_router_id 26\n#\tpriority 98\n#\tadvert_int 1\n#\tauthentication &#123;\n#\t\tauth_type PASS\n#\t\tauth_pass 0uuOpPPp\n#\t&#125;\n#\tvirtual_ipaddress &#123;\n#\t\t192.168.6.98/24 dev ens33\n#\t&#125;\n#&#125;\n\n#nodesrv2配置文件\n\nvi /etc/keepalived/keepalived.cfg\n...\nvrrp_instance VI_1 &#123;\n\tstate BACKUP\n\tinterface ens33\n\tvirtual_router_id 16\n\tpriority 98\n\tadvert_int 1\n\tauthentication &#123;\n\t\tauth_type PASS\n\t\tauth_pass 516f97b2\n\t&#125;\n\tvirtual_ipaddress &#123;\n\t\t192.168.6.99/24 dev ens33\n\t&#125;\n\ttrack_interface &#123;\n\t\tens33\n\t&#125;\n\ttrack_script &#123;\n\t\tchk_nginx\n\t&#125;\n\tnotify_master &quot;/etc/keepalived/notify.sh master&quot;\n\tnotify_backup &quot;/etc/keepalived/notify.sh backup&quot;\n\tnotify_fault &quot;/etc/keepalived/notify.sh fault&quot;\n&#125;\n\n#vrrp_instance VI_2 &#123;\n#\tstate MASTER\n#\tinterface ens33\n#\tvirtual_router_id 26\n#\tpriority 100\n#\tadvert_int 1\n#\tauthentication &#123;\n#\t\tauth_type PASS\n#\t\tauth_pass 0uuOpPPp\n#\t&#125;\n#\tvirtual_ipaddress &#123;\n#\t\t192.168.6.98/24 dev ens33\n#\t&#125;\n#&#125;\n</code></pre>\n<p>3. 启动服务测试<br>\n systemctl start keepalived<br>\nsystemctl status keepalived</p>\n<pre><code>cleint访问测试\n~# while true; do curl 192.168.6.99; sleep 1; done\n</code></pre>\n<p>#停止 nodesrv1 上的 nginx 服务，在 nodesrv2 上抓包观察 VIP 地址流动</p>\n<pre><code>nodesrv1\n~# systemctl sotp nginx\n\nnodesrv2\n~# tcpdump -i ens33 -nn host 224.0.100.89\n</code></pre>\n<p>#调适 keepalived 脚本</p>\n<pre><code>注意:\n\tvrrp_script chk_ndown &#123;\n\t\tscript &quot;/bin/bash -c '[[ -f /etc/keepalived/down ]]' &amp;&amp; exit 1 || exit 0&quot; #'/etc/keepalived/down',文件存在时,权重降级\n\t\tinterval 1\n\t\tweight -10\n\t&#125;\n\n\t#[[ -f /etc/keepalived/down ]],要特别地作为bash的参数的运行\n\n\ttrack_script &#123;\n\t\t#chk_nginx\n\t\tchk_ndown\n\t&#125;</code></pre>\n",
            "tags": [
                "keepalived"
            ]
        },
        {
            "id": "http://yoursite.com/2018/12/24/Keepalived%E9%AB%98%E5%8F%AF%E7%94%A8IPVS%E5%81%A5%E5%BA%B7%E7%8A%B6%E6%80%81%E6%A3%80%E6%B5%8B/",
            "url": "http://yoursite.com/2018/12/24/Keepalived%E9%AB%98%E5%8F%AF%E7%94%A8IPVS%E5%81%A5%E5%BA%B7%E7%8A%B6%E6%80%81%E6%A3%80%E6%B5%8B/",
            "title": "Keepalived高可用IPVS健康状态检测",
            "date_published": "2018-12-24T13:16:39.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>测试环境</p>\n<pre><code>nodesrv1: 192.168.6.86, nodesrv2: 192.168.6.88\nrealsrv1: 192.168.6.80, realsrv2: 192.168.6.82\ncleint: 192.168.6.68\nvip: 192.168.6.99\n</code></pre>\n<p>1.nodesrv 端安装及配置</p>\n<pre><code>nodesrv[1,2]\n\tyum install keepalived -y\n\tyum install ipvsadm -y\n</code></pre>\n<p>2.nodesrv1 配置文件，nodesrv2 修改对应 IP 地址</p>\n<pre><code>vi /etc/keepalived/keepalived.conf\n! Configuration File for keepalived\n\nglobal_defs &#123;\n\tnotification_email &#123;\n\troot@localhost\n\t&#125;\n\tnotification_email_from keepalived@localhost\n\tsmtp_server 127.0.0.1\n\tsmtp_connect_timeout 30\n\trouter_id nodesrv1\n\tvrrp_mcast_group4 224.0.100.89\n\tvrrp_skip_check_adv_addr\n\tvrrp_strict\n\tvrrp_garp_interval 0\n\tvrrp_gna_interval 0\n&#125;\n\nvrrp_instance VI_1 &#123;\n\tstate MASTER\n\tinterface ens33\n\tvirtual_router_id 16\n\tpriority 100\n\tadvert_int 1\n\tauthentication &#123;\n\t\tauth_type PASS\n\t\tauth_pass 516f97b2\n\t&#125;\n\tvirtual_ipaddress &#123;\n\t192.168.6.99/24 dev ens33\n\t&#125;\n\ttrack_interface &#123;\n\tens33\n\t&#125;\n\tnotify_master &quot;/etc/keepalived/notify.sh master&quot;\n\tnotify_backup &quot;/etc/keepalived/notify.sh backup&quot;\n\tnotify_fault &quot;/etc/keepalived/notify.sh fault&quot;   \n&#125;\n\nvrrp_instance VI_2 &#123;\n\tstate BACKUP\n\tinterface ens33\n\tvirtual_router_id 26\n\tpriority 98\n\tadvert_int 1\n\tauthentication &#123;\n\t\tauth_type PASS\n\t\tauth_pass 0uuOpPPp\n\t&#125;\n\tvirtual_ipaddress &#123;\n\t\t192.168.6.98/24 dev ens33\n\t&#125;\n&#125;\n\nvirtual_server 192.168.6.99 80 &#123;\n\tdelay_loop 2\n\tlb_algo rr\n\tlb_kind DR\n\t# persistence_timeout 50\n\tprotocol TCP\n\n\tsorry_server 127.0.0.1 80 #定义sorry-server\n\n\treal_server 192.168.6.80 80 &#123;\n\t\tweight 1\n\t\tHTTP_GET &#123;\n\t\t\turl &#123;\n\t\t\tpath /\n\t\t\tstatus_code 200\n\t\t\t&#125;\n\t\t\tconnect_timeout 2\t #连接超时时长\n\t\t\tnb_get_retry 3\t\t #超时重试数次\n\t\t\tdelay_before_retry 1 #每次重试时间间隔\n\t\t&#125;\n\t&#125;\n\treal_server 192.168.6.82 80 &#123;\n\t\tweight 1\n\t\tHTTP_GET &#123;\n\t\t\turl &#123;\n\t\t\tpath /\n\t\t\tstatus_code 200\n\t\t\t&#125;\n\t\t\tconnect_timeout 2\n\t\t\tnb_get_retry 3\n\t\t\tdelay_before_retry 1\n\t\t&#125;\n\t&#125;\n&#125;\n</code></pre>\n<p>3.realsrv [1,2] 运行配置脚本<br>\n～# sh lvs_dr_rs.sh start</p>\n<pre><code>vi lvs_dr_rs.sh\n#!/bin/bash\n#Author:wangxiaochun\n#Date:2017-08-13\nvip=192.168.6.99\nmask='255.255.255.255'\ndev=lo:1\nrpm -q httpd &amp;&gt; /dev/null || yum -y install httpd &amp;&gt;/dev/null\nservice httpd start &amp;&gt; /dev/null &amp;&amp; echo &quot;The httpd Server is Ready!&quot;\necho &quot;&lt;h1&gt;`hostname`&lt;/h1&gt;&quot; &gt; /var/www/html/index.html\n\ncase $1 in\nstart)\n\techo 1 &gt; /proc/sys/net/ipv4/conf/all/arp_ignore\n\techo 1 &gt; /proc/sys/net/ipv4/conf/lo/arp_ignore\n\techo 2 &gt; /proc/sys/net/ipv4/conf/all/arp_announce\n\techo 2 &gt; /proc/sys/net/ipv4/conf/lo/arp_announce\n\tifconfig $dev $vip netmask $mask #broadcast $vip up\n\t#route add -host $vip dev $dev\n\techo &quot;The RS Server is Ready!&quot;\n\t;;\nstop)\n\tifconfig $dev down\n\techo 0 &gt; /proc/sys/net/ipv4/conf/all/arp_ignore\n\techo 0 &gt; /proc/sys/net/ipv4/conf/lo/arp_ignore\n\techo 0 &gt; /proc/sys/net/ipv4/conf/all/arp_announce\n\techo 0 &gt; /proc/sys/net/ipv4/conf/lo/arp_announce\n\techo &quot;The RS Server is Canceled!&quot;\n\t;;\n*) \n\techo &quot;Usage: $(basename $0) start|stop&quot;\n\texit 1\n\t;;\nesac\n</code></pre>\n<p>4. 配置 sorry-server</p>\n<pre><code>nodesrv[1,2]\n\tyum install httpd -y\n\techo 'sorry server nodesrv[1,2]' &gt;/www/html/index.html\n\tsystemctl start httpd\n</code></pre>\n<p>5.cleint 测试集群环境，注意防火墙规则</p>\n<pre><code>~# while true; do curl 192.168.6.99; sleep 1; done\n</code></pre>\n",
            "tags": [
                "keepalived"
            ]
        },
        {
            "id": "http://yoursite.com/2018/12/24/Markdown%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95/",
            "url": "http://yoursite.com/2018/12/24/Markdown%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95/",
            "title": "Markdown简单用法",
            "date_published": "2018-12-24T11:22:21.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Markdown 基本语法</p>\n<pre><code>markdown是一种纯文本格式的标记语言。通过简单的标记语法,它可以使普通文本内容具有一定的格式.\n</code></pre>\n<p>标题</p>\n<pre><code># 这是一级标题\n## 这是二级标题\n### 这是三级标题\n#### 这是四级标题\n##### 这是五级标题\n###### 这是六级标题\n</code></pre>\n<p>字体</p>\n<pre><code>斜体 要倾斜的文字左右分别用一个*号包起来\n\t\n\t*这是倾斜的文字*\n\n加粗 要加粗的文字左右分别用两个*号包起来\n\t\n\t**这是加粗的文字**\n\t\n斜体加粗 要倾斜和加粗的文字左右分别用三个*号包起来\n\n\t***这是斜体加粗的文字***\n\t\n删除线 要加删除线的文字左右分别用两个~~号包起来\n\n\t~~这是加删除线的文字~~\n</code></pre>\n<p>分割线</p>\n<pre><code>三个或者三个以上的 - 或者 * 都可以\n\t---\n\t----\n\t***\n\t*****\n</code></pre>\n<p>超链接</p>\n<pre><code>[超链接名](超链接地址 &quot;超链接title&quot;) title可加可不加\n\n\t[百度](http://baidu.com)\n</code></pre>\n<p>列表</p>\n<pre><code>无序列表\n\t语法:无序列表用 - + * 任何一种都可以\n\t\n\t- 列表内容\n\t+ 列表内容\n\t* 列表内容\n\n\t注意:- + * 跟内容之间都要有一个空格\n\n有序列表\n\t语法:数字加点\n\t\n\t1.列表内容\n\t2.列表内容\n\t3.列表内容\n\n\t注意：序号跟内容之间要有空格\n\n列表嵌套\n\t上一级和下一级之间敲三个空格即可\n</code></pre>\n<p>代码</p>\n<pre><code>单行代码:代码之间分别用一个反引号包起来\n\t`代码内容`\n\n代码块:代码之间分别用三个反引号包起来,且两边的反引号单独占一行\t\n\t(```)\n\t  代码...\n\t  代码...\n\t  代码...\n\t(```)\n\t\n注意:为了防止转译,前后三个反引号处加了小括号,实际是没有的.这里只是用来演示,实际中去掉两边小括号即可.\n</code></pre>\n",
            "tags": [
                "markdown"
            ]
        },
        {
            "id": "http://yoursite.com/2018/12/23/Httpd%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/",
            "url": "http://yoursite.com/2018/12/23/Httpd%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/",
            "title": "Httpd基础知识",
            "date_published": "2018-12-23T10:44:33.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"http相关术语\"><a class=\"markdownIt-Anchor\" href=\"#http相关术语\">#</a> HTTP 相关术语</h3>\n<pre><code>http:Hyper Text Transfer Protocol, 80/tcp\nhtml:Hyper Text Markup Language 超文本标记语言,编程语言\nMIME:Multipurpose Internet Mail Extensions\n\t多用途互联网邮件扩展 /etc/mime.types\n格式:major/minor\n\ttext/plain\n\ttext/html\n\ttext/css\n\timage/jpeg\n\timage/png\n\tvideo/mp4\n\tapplication/javascript\n\n参考:http://www.w3school.com.cn/media/media_mimeref.asp\n</code></pre>\n<h3 id=\"http工作机制\"><a class=\"markdownIt-Anchor\" href=\"#http工作机制\">#</a> HTTP 工作机制</h3>\n<pre><code>http请求:http request\nhttp响应:http response\n1次http事务:请求&lt;--&gt;响应\n</code></pre>\n<h3 id=\"web资源web-resource\"><a class=\"markdownIt-Anchor\" href=\"#web资源web-resource\">#</a> Web 资源 (web resource)</h3>\n<pre><code>单个网页由多个资源构成,打开一个页面,会有多个资源展示出来,但是每个资源都要单独请求。因此,一个&quot;Web 页面&quot;通常并不是单个资源,而是一组资源的集合.\n\n1.静态文件:无需服务端做出额外处理.\n\t文件后缀:.jpg, .html, .txt, .js, .css, .mp3, .avi\n2.动态文件:服务端执行程序,返回执行的结果.\n\t文件后缀:.asp, .php, .jsp\n</code></pre>\n<h3 id=\"提高http连接性能\"><a class=\"markdownIt-Anchor\" href=\"#提高http连接性能\">#</a> 提高 HTTP 连接性能</h3>\n<pre><code>并行连接:通过多条TCP连接发起并发的HTTP请求 \n持久连接:keep-alive长连接,重用TCP连接,以消除连接和关闭的时延,以事务个数和时间来决定是否关闭连接\n管道化连接:通过共享TCP连接发起并发的HTTP请求\n复用的连接:交替传送请求和响应报文(实验阶段)\n</code></pre>\n<h3 id=\"uri\"><a class=\"markdownIt-Anchor\" href=\"#uri\">#</a> URI</h3>\n<pre><code>URI:Uniform Resource Identifier,统一资源标识,分为URL和URN\n\tURN: Uniform Resource Naming,统一资源命名\n\tURL: Uniform Resorce Locator,统一资源定位符,用于描述某服务器某特定资源位置\n两者区别:URN如同一个人的名称,而URL代表一个人的住址；换言之,URN定义某事物的身份,而URL提供查找该事物的方法；URN仅用于命名,而不指定地址 \n</code></pre>\n<h3 id=\"url组成\"><a class=\"markdownIt-Anchor\" href=\"#url组成\">#</a> URL 组成</h3>\n<pre><code>&lt;scheme&gt;://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;path&gt;;&lt;params&gt;?&lt;query&gt;#&lt;frag&gt;   \nschame:方案,访问服务器以获取资源时要使用哪种协议\nuser:用户,某些方案访问资源时需要的用户名\npassword:密码,用户对应的密码,中间用:分隔\nHost:主机,资源宿主服务器的主机名或IP地址         \nport:端口,资源宿主服务器正在监听的端口号,很多方案有默认端口号\npath:路径,服务器资源的本地名,由一个/将其与前面的URL组件分隔\nparams:参数,指定输入的参数,参数为名/值对,多个参数,用;分隔\nquery:查询,传递参数给程序,如数据库,用？分隔,多个查询用&amp;分隔\nfrag:片段,一小片或一部分资源的名字,此组件在客户端使用,用#分隔\n</code></pre>\n<h3 id=\"网站访问量\"><a class=\"markdownIt-Anchor\" href=\"#网站访问量\">#</a> 网站访问量</h3>\n<pre><code>IP(独立IP):即Internet Protocol,指独立IP数.一天内来自相同客户机IP地址只计算一次,记录远程客户机IP地址的计算机访问网站的次数,是衡量网站流量的重要指标.\nPV(访问量):即Page View,页面浏览量或点击量,用户每次刷新即被计算次,PV反映的是浏览某网站的页面数,PV与来访者的数量成正比,PV并不是页面的来访者数量,而是网站被访问的页面数量.\nUV(独立访客):即Unique Visitor,访问网站的一台电脑为一个访客,一天内相同的客户端只被计算一次,可以理解成访问某网站的电脑的数量,网站判断来访电脑的身份是通过来访电脑的cookies实现的,如果更换了IP后但不清除cookies,再访问相同网站,该网站的统计中UV数是不变的.\n\n网站统计:http://www.alexa.cn/rank/</code></pre>\n",
            "tags": [
                "httpd"
            ]
        },
        {
            "id": "http://yoursite.com/2018/12/23/Hello%20Word/",
            "url": "http://yoursite.com/2018/12/23/Hello%20Word/",
            "title": "Hello Word",
            "date_published": "2018-12-23T04:03:51.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>微凉<br>\n高桐深密间幽篁，乳燕声希夏日长。<br>\n独坐水亭风满袖，世间清景是微凉。</p>\n",
            "tags": [
                "Test"
            ]
        }
    ]
}